# 빈에서 값으로

## 빈(Bean)

- 자바 빈즈는 GUI 개발을 위해 자바에 도입되었고 자바 빈을 정의하기 위해서 다음 부분들이 제공되어야 합니다.
    - 기본 생성자
    - 게터와 세터
    - 등등..
- 개발이 계속해서 발전해나가면서 자바빈즈 방식이 모든 개발에 어울리는 방식이 아니라는 것을 알게 되었고 객체로 표현할때 값이 더 나은 형태로써 사용되게 되었습니다.

## 값

- 값이란 값 의미론을 따르는 구체적인 원시 타입이나 참조 타입을 뜻합니다.
- 어떤 타입이 값 의미론(value semantics)을 제공한다는 말은 원시 타입 값처럼 스택에 데이터 구조가 할당되어 참조 타입의 객체에 따르는 부가비용이 들지 않으면서도, 일반 클래스가 제공하는 메서드 등의 편의 사항을 똑같이 사용할 수 있도록 해준다는 뜻입니다.
- 자바의 원시타입은 모두 값 의미론을 따르지만, 객체는 값 의미론을 따르는 것을 보장하지 않습니다.
    - 특히, 가변 객체는 값 의미론을 따르지 않습니다.
- 값 의미론을 따르는 객체와 아닌 객체는 다음과 같습니다.
  - 값 의미론을 따르는 객체
      - Integer, String, 불변성을 가진 POJO, 불변성을 가진 빈 (불변 객체)
      - URI (고유한 값)
  - 값 의미론을 따르지 않는 객체
      - java.util.Date, 자바 빈즈, 가변 POJO (수정이 가능한 객체)
      - DBConnectionInfo (불변이지만 Database 인스턴스가 데이터 조각이 아님)

## 값을 선호해야만 하는 이유는 무엇인가?
- 빈보다 값이 선호되는 이유는 값은 불변성이 보장되기 때문입니다.
- 불변객체는 다음과 같은 장점을 가집니다.
    - 맵의 키나 집합 원소로 불변 객체를 넣을 수 있습니다.
    - 불변 객체의 불변 컬렉션에 대해 이터레이션하는 경우 원소가 달라지는 것을 막을 수 있습니다.
    - 초기 상태를 깊은 복사를 하지 않고도 다양한 시나리오로 사용해볼 수 있다. (불변 객체를 쓰면 값이 변경되지 않으므로 되돌리기나 다시하는 것이 쉬워집니다.)
    - 여러 스레드에서 불변 객체를 안전하게 공유할 수 있습니다.

## 빈을 값으로 리팩터링 하기
- 가변 데이터의 경우 불변성을 가진 데이터에 비해 실수하기 쉬워서 위험하다.
- @JvmOverloads constructor 구문을 통해 모든 경우의 생성자를 만들 수 있습니다.
- 가변 객체에 대한 불변 참조를 불변 객체에 대한 가변 참조로 변경하면 노출되는 범위를 줄여 변경에 대한 영향을 줄일 수 있습니다.
- 가변 클래스의 경우 equals and hashcode를 구현할 경우 맵과 집합에 넣고 값이 변경될 경우 의도치 않은 동작을 할 수 있습니다.