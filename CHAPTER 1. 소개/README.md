# 자바에서 코틀린으로 (덩컨 맥그레거, 냇 프라이스 저, 오현석 역)

# ch1. 소개

## 프로그래밍 언어의 결
프로그래밍의 언어에도 결이 있다. 목공에서 결을 거스르면 작업이 어려워지듯이 프로그래밍 언어도 마찬가지이다.

과거의 자바에서 함수형 언어를 사용하는 것은 자바의 결을 거스르는 일이었다. 시간이 지나면서 익명 내부 클래스, 람다식 등이 자바에 추가되면서 결을 거스르지는 않게 되었지만, 아직 한계가 남아있다.

## 코틀린의 결
코틀린 언어의 목표(왜 코틀린인가?): 간결성, 안전성, 상호 운용성, 도구 친화성

cf) 최근의 목표는 간결성, 안전성, 상호 운용성, 표현력, 상호 운용성, 멀티 플랫폼으로 변경([코틀린 공식 사이트](https://kotlinlang.org/#why-kotlin))

코틀린은 자바와 결이 다르다.

* 코틀린은 불변 데이터를 변환하는 쪽을 선호한다.
    * 데이터 클래스를 사용하여, 스택에 데이터 구조를 할당하면서도 일반 클래스가 제공하는 메서드 등의 편의 사항을 똑같이 사용할 수 있다.(value semantic을 제공해준다.)
    * 표준 라이브러리를 사용하면 가변 데이터 갱신하는 것보다 불변 데이터 컬렉션을 훨씬 더 쉽고 간결하게 활용할 수 있다.
* 코틀린은 동작을 명시적으로 작성하는 쪽을 더 선호한다.
    * 암시적 형변환이 없다.
* 코틀린은 동적 바인딩보다 정적 바인딩을 더 선호한다.
    * 기본적으로 클래스는 확장될 수 없고 다형성이 없으므로 명시적으로 다형성과 확장성을 활성화해 한다.
    * 리플렉션을 사용하려면, 별도 라이브러리를 의존성에 추가 해야 한다.
* 코틀린은 특별한 경우를 좋아하지 않는다.
    * 원시형과 참조형을 구분하지 않으며, void 형이 없다.
* 코틀린은 마이그레이션을 쉽게하기 위해 자신의 규칙을 깬다.
    * 자바와 공존할 수 있도록 기능이 구성되어 있다.
    * 만약 주의하지 않으면, 다른 언어 사용 습관으로 인해 코틀린의 결을 따라 작업하지 못할 수 도 있다.

## 코틀린으로 리팩터링하기

### 리팩터링 원칙
저자는 자바에서 코틀린으로 마이그레이션(또는 리팩터링) 시 변화를 작게 수행함으로 써 위험에 대처할 수 있었다.

두 언어 간의 리팩터링은 하나의 언어 내부에서의 리팩터링은 어렵지만, 자바와 코틀린은 상대적으로 두 언어 사이의 이음매가 없어(seamless)이 보다 쉽다.

과거에는 리팩터링 과정이 직접 손으로 수행하는 단계로 자세히 설명해 줘야 했지만, 요즘에는 IDE의 개선과 발전으로 더 복잡한 시나리오를 도구가 자동화 해줄 것이다.

### 테스트 커버리지가 좋다고 가정한다
마틴 파울러의 말처럼, 리팩터링을 위해서는 먼저 탄탄한 테스트가 존재하고 있어야 한다. 만약 그렇지 않다면 코드에 대한 회고 테스트 수행이 어려울 수 있다.

### git bisect를 고려해 커밋한다.
git bisect 명령은 커밋 이력을 이진 검색을 통해 테스트가 실패하는 첫 번째 커밋을 찾아 준다. 

## 어떤 코드를 변경할까
책에서 국제여행을 계획하고 예약 하게 도와주는 허구의 애플리케이션 "트래블레이터"를 코드기반 예제로 다룰 것이다.
