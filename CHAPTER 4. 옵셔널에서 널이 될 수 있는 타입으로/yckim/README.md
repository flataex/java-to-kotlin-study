# 옵셔널에서 널이 될 수 있는 타입으로

## 없음을 표현하기
- 자바 8이전에는 필드 이름 혹은 어노테이션을 이용해서 Null을 표현했다.
- 자바 8 이후에는 Optional 타입을 이용하여 Null을 표현할 수 있게 되었습니다.
- 코틀린은 타입 시스템으로 Null을 선택적으로 사용할 수 있습니다.
- 코틀린의 Null 처리는 완벽하지 않으며, 보통 자바와의 하위 호환성을 유지하기 위해 문제가 발생합니다.
- Optional을 사용하면 잠재적인 부재, 오류, 비동기성 등을 모두 똑같은 도구를 이용해 처리할 수 있지만 코틀린은 널 가능성을 지원하기 위해 설계된 언어이기 때문에 코틀린에게는 맞지 않는 방식입니다.
    - 코틀린의 널 가능성은 하위호환성 측면에서 Optional 보다 뛰어나며 이를 통해 코드의 표현력을 증가시킬 수 있습니다.

## 옵셔널에서 널 가능성으로 리팩터링 하기
- 코틀린은 예기치 않은 널이 발생하고 나서 가장 가까운 시점에 이를 알아낼 수 있으며, 이런 특성은 null로 설정된 참조가 시간이나 공간적으로 멀리 떨어진 곳에서 터질 수 도 있는 자바와는 다릅니다.
- 널 가능성이 존재하는 값에 대하여  `?`을 붙이면 널 가능성을 표시할 수 있습니다.
- 널 값 보증 연산자`!!`를 사용하면 예외를 발생 시킬 수 있습니다.
- 확장과 축소 리팩터링 방법을 사용하면 점진적으로 리팩터링 하면서 변경에 대한 영향을 최소화할 수 있습니다.

## 코틀린 다운 코드로 리팩터링 하기
- 코틀린 다운 형태로 리팩터링하기
  - object와 같은 내용을 제거하고 불필요한 네임 스페이스를 제거하기
  - 확장함수로 변환하기
- 구조적인 리팩터링은 근본적으로 안전한편이며, 다형성이나 리플렉션에 의존하는 코드 동작을 바꾸는 경우를 제외하면 코드가 제대로 컴파일 되고 제대로 동작할 가능성이 높습니다.
- 상태 변화에 의존하는 코드를 리팩터링 하는 것은 상태 변화를 감안해 코드를 변환하는 도구가 완벽하게 판단하기 어려우므로 더 위험할 수 있습니다.
- 엘비스 연산자`?:`란 좌변이 null이 아니면 좌변 값을 돌려주고 null이면 우변 값을 돌려줍니다.
- `?.let` 구문에서는 `?.` 는 결과가 null이면 null을 반환하고 null이 아니라면 `let` 구문이 실행됩니다.
- 값 반환시에 `when`을 이용하여 분기 처리할 수 있습니다.
- `takeIf`는 반환된 값이 true면 수신 객체를 반환하고 true가 아니라면 null을 반환합니다.